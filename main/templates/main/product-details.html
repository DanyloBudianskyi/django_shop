{% extends 'main/base.html' %}
{% block title %}{{ product.title }}{% endblock %}

{% load shop_filters %}

{% block content %}
<article class="product-detail">
  <div class="product-detail-header">
    <h1 class="product-detail-title">{{ product.name }}</h1>
    <div class="product-detail-meta">
      <span class="meta-item">üë§ {{ product.category }}</span>
      <span class="meta-item">üìÖ {{ product.created_at| time_ago }}</span>
      <span class="meta-item">üëÅÔ∏è {{ product.views }} –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤</span>
      <span class="meta-item">üìÇ <a href="{{ product.category.get_absolute_url }}">{{ product.category.name }}</a></span>
    </div>
  </div>
 
  {% if product.image %}
  <div class="product-detail-image">
    <img src="{{ product.image.url }}" alt="{{ product.title }}">
  </div>
  {% endif %}
 
  <div class="product-detail-content">
    <p class="text-lg text-black font-bold mt-2">üí∞–¶—ñ–Ω–∞: {{ product.price| currency }}</p>
    {{ product.description|linebreaks }}
  </div>
 
  <div class="product-detail-footer">
    <p class="product-updated">–û–Ω–æ–≤–ª–µ–Ω–æ: {{ product.updated_at|date:"d.m.Y H:i" }}</p>
    <a href="{% url 'main:product_list' %}" class="back-btn">‚Üê –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ —Å–ø–∏—Å–∫—É</a>
    <form style="display:inline;">
      <button class="add-cart-btn">–î–æ–¥–∞—Ç–∏ –≤ –∫–æ—à–∏–∫</button>
    </form>
  </div>
</article>
 
{% if product %}
<section class="related-products">
  <h2 class="related-title">–°—Ö–æ–∂—ñ –ø—Ä–æ–¥—É–∫—Ç–∏</h2>
  <div class="related-grid">
    {% for related in related_products %}
    <div class="related-card">
      {% if related.image %}
      <img src="{{ related.image.url }}" alt="{{ related.name }}">
      {% endif %}
      <h3>{{ related.name }}</h3>
      <p>{{ related.description|truncatewords:15 }}</p>
      <a href="{{ related.get_absolute_url }}">–ß–∏—Ç–∞—Ç–∏ –¥–∞–ª—ñ ‚Üí</a>
    </div>
    {% endfor %}
  </div>
</section>
{% endif %}
{% endblock %}